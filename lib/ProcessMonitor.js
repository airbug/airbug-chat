//-------------------------------------------------------------------------------
// Requires
//-------------------------------------------------------------------------------

var Class = require('./Class');
var Obj = require('./Obj');


//-------------------------------------------------------------------------------
// Declare Class
//-------------------------------------------------------------------------------

var ProcessMonitor = Class.extend(Obj, {

    //-------------------------------------------------------------------------------
    // Constructor
    //-------------------------------------------------------------------------------

    _constructor: function(process) {
        this._super();


        //-------------------------------------------------------------------------------
        // Declare Variables
        //-------------------------------------------------------------------------------

        this.process = process;

        this.started = false;
    },


    //-------------------------------------------------------------------------------
    // Server Implementation
    //-------------------------------------------------------------------------------

    start: function() {
        if (!this.started) {
            this.started = true;

            this.process.stdout.setEncoding('utf8');

            var _this = this;
            this.process.stdout.addListener('data', function(data) {
                _this.handleData(data);
            });
        }
    },

    stop: function() {
        if (this.started) {
            this.started = false;
        }
    },

    handleData: function(data) {
        console.log(data);
    }
});


//-------------------------------------------------------------------------------
// Module Export
//-------------------------------------------------------------------------------

module.exports = ProcessMonitor;
